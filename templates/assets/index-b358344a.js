import{f as U,b as P}from"./index-556d8581.js";import{u as D}from"./website-fa08ef00.js";import{d as T,$ as B,r as l,f as I,H as M,I as N,U as u,S as d,N as o,M as R,c as $,F}from"./vue-8caab7e7.js";import{R as Q,O as V,I as j,a7 as E}from"./naiveUI-06d71335.js";import"./lodash-cc4aae98.js";import"./ionicons5-13bb01b1.js";import"./download-319621c6.js";import"./getList-9b4e10a4.js";import"./baseStyle-3d03bd09.js";const H=T({__name:"index",setup(J){const{isMobile:r,isPad:K,isDesktop:O}=U(),_=D(),{torrentList:p,torrentColumns:v}=B(_),{getTorrentList:w,getSiteList:f,handleUpdateSorter:h,getDownloaderList:C}=_,s=l(!1),g=l([]),t=l(""),a=l({page:1,pageSize:r.value?20:33,size:"small",showQuickJumper:!0,itemCount:0,showSizePicker:!0,pageSizes:[10,20,25,30,33,40,100],pageSlot:9,simple:r.value,prefix({itemCount:e}){return`共 ${e}.`}}),m=async()=>{g.value=p.value.items.filter(e=>e.title.toLowerCase().includes(t.value.toLowerCase())||e.subtitle.toLowerCase().includes(t.value.toLowerCase())||e.category.toLowerCase().includes(t.value.toLowerCase())||e.area.toLowerCase().includes(t.value.toLowerCase())||e.sale_status.toLowerCase().includes(t.value.toLowerCase()))},n=async(e,i)=>{s.value=!0,await w(e,i),a.value.page=p.value.per_page,a.value.itemCount=p.value.total,await m(),s.value=!1},S=async e=>{a.value.pageSize=e,await n(a.value.page,a.value.pageSize)},y=async e=>{await n(e,a.value.pageSize)},L=async()=>{await n(a.value.page,a.value.pageSize)};return I(async()=>{s.value=!0,await f(),await C(),await n(a.value.page,a.value.pageSize),s.value=!1}),(e,i)=>{const z=Q,x=V,b=j,k=E;return M(),N(F,null,[u(b,{class:"pt-2 mb-1",justify:"start"},{default:d(()=>[u(z,{value:o(t),"onUpdate:value":[i[0]||(i[0]=c=>R(t)?t.value=c:null),m],size:"small"},null,8,["value"]),u(x,{size:"small",type:"warning",onClick:L},{default:d(()=>[$(" 刷新 ")]),_:1})]),_:1}),u(k,{columns:o(v),data:o(g),loading:o(s),"min-height":o(r)?520:740,"paginate-single-page":!0,pagination:o(a),"row-key":c=>c.hash_string,bordered:"","flex-height":"","max-height":"900",remote:"",size:"small",striped:"","onUpdate:pageSize":S,"onUpdate:page":y,"onUpdate:sorter":o(h)},null,8,["columns","data","loading","min-height","pagination","row-key","onUpdate:sorter"])],64)}}});const te=P(H,[["__scopeId","data-v-a877a8e3"]]);export{te as default};
