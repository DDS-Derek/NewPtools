import{d as Ke,$ as _e,r as d,f as Je,H as Y,I as Qe,U as l,S as i,N as o,R as ye,a4 as ge,c as v,W as Xe,l as _,e as ee}from"./vue-8caab7e7.js";import{e as f,b as Ye,g as et}from"./index-35c37f34.js";import{u as tt,$ as te,a as ae,r as h,b as at,c as ke,d as be,e as we,f as lt,g as st,h as Se,i as ot,j as it,k as nt,l as rt,m as dt,o as ut,p as ct,q as pt,s as ft,t as mt,v as ht}from"./download-96c0cf30.js";import{r as xe}from"./baseStyle-3d03bd09.js";import{ag as vt,aq as _t,R as yt,ao as O,I as le,U as gt,a4 as kt,O as I,as as bt,F as wt,Z as St}from"./naiveUI-06d71335.js";const xt=Ke({__name:"MySiteForm",setup(g){const k=$t(),{refMySiteForm:C,mySiteForm:s,siteInfoList:W,addMySiteFormRules:z}=_e(k),{saveMySite:E,removeMySite:V}=k,q=tt(),{downloaderList:S}=_e(q),{getDownloaderList:Z}=q,x=d(!1),T=async()=>{x.value=!0;try{await E()}catch(b){console.error(b)}x.value=!1};return Je(async()=>{await Z()}),(b,r)=>{const L=vt,c=_t,m=yt,y=O,U=le,R=gt,se=kt,p=I,P=bt;return Y(),Qe("div",null,[l(R,{ref:o(C),model:o(s),rules:o(z),class:"site-form","show-label":!1,"inline-message":"","label-position":"top",size:"small","status-icon":""},{default:i(()=>[o(s).id===0?(Y(),ye(c,{key:0,label:"选择站点",path:"site"},{default:i(()=>[l(L,{value:o(s).site,"onUpdate:value":r[0]||(r[0]=n=>o(s).site=n),disabled:o(s).id!==0,placeholder:o(s).id!==0?"":"请选择要添加的站点",options:o(W),filterable:""},null,8,["value","disabled","placeholder","options"])]),_:1})):ge("",!0),l(c,{label:"站点昵称",path:"nickname"},{default:i(()=>[l(m,{value:o(s).nickname,"onUpdate:value":r[1]||(r[1]=n=>o(s).nickname=n),clearable:"",placeholder:"自定义站点名称，必填","show-word-limit":""},null,8,["value"])]),_:1}),l(c,{label:"功能开关",required:""},{default:i(()=>[l(U,null,{default:i(()=>[l(y,{value:o(s).get_info,"onUpdate:value":r[2]||(r[2]=n=>o(s).get_info=n),round:!1,border:""},{checked:i(()=>[v(" 数据 ")]),unchecked:i(()=>[v(" 数据 ")]),"checked-icon":i(()=>[l(f,{icon:"Checkbox",size:"24",color:"green"})]),"unchecked-icon":i(()=>[l(f,{icon:"CloseSharp",size:"18",color:"darkred"})]),_:1},8,["value"]),l(y,{value:o(s).sign_in,"onUpdate:value":r[3]||(r[3]=n=>o(s).sign_in=n),round:!1,border:"",label:""},{checked:i(()=>[v(" 签到 ")]),unchecked:i(()=>[v(" 签到 ")]),"checked-icon":i(()=>[l(f,{icon:"Checkbox",size:"24",color:"green"})]),"unchecked-icon":i(()=>[l(f,{icon:"CloseSharp",size:"18",color:"darkred"})]),_:1},8,["value"]),l(y,{value:o(s).search,"onUpdate:value":r[4]||(r[4]=n=>o(s).search=n),round:!1,border:"",label:""},{checked:i(()=>[v(" 搜索 ")]),unchecked:i(()=>[v(" 搜索 ")]),"checked-icon":i(()=>[l(f,{icon:"Checkbox",size:"24",color:"green"})]),"unchecked-icon":i(()=>[l(f,{icon:"CloseSharp",size:"18",color:"darkred"})]),_:1},8,["value"]),l(y,{value:o(s).brush_free,"onUpdate:value":r[5]||(r[5]=n=>o(s).brush_free=n),round:!1,border:"",label:""},{checked:i(()=>[v(" Free刷流 ")]),unchecked:i(()=>[v(" Free刷流 ")]),"checked-icon":i(()=>[l(f,{icon:"Checkbox",size:"24",color:"green"})]),"unchecked-icon":i(()=>[l(f,{icon:"CloseSharp",size:"18",color:"darkred"})]),_:1},8,["value"]),l(y,{value:o(s).brush_rss,"onUpdate:value":r[6]||(r[6]=n=>o(s).brush_rss=n),round:!1,border:"",label:""},{checked:i(()=>[v(" RSS刷流 ")]),unchecked:i(()=>[v(" RSS刷流 ")]),"checked-icon":i(()=>[l(f,{icon:"Checkbox",size:"24",color:"green"})]),"unchecked-icon":i(()=>[l(f,{icon:"CloseSharp",size:"18",color:"darkred"})]),_:1},8,["value"]),l(y,{value:o(s).repeat_torrents,"onUpdate:value":r[7]||(r[7]=n=>o(s).repeat_torrents=n),round:!1,border:"",label:""},{checked:i(()=>[v(" 辅种 ")]),unchecked:i(()=>[v(" 辅种 ")]),"checked-icon":i(()=>[l(f,{icon:"Checkbox",size:"24",color:"green"})]),"unchecked-icon":i(()=>[l(f,{icon:"CloseSharp",size:"18",color:"darkred"})]),_:1},8,["value"]),l(y,{value:o(s).hr,"onUpdate:value":r[8]||(r[8]=n=>o(s).hr=n),round:!1,border:"",label:""},{checked:i(()=>[v(" H&R ")]),unchecked:i(()=>[v(" H&R ")]),"checked-icon":i(()=>[l(f,{icon:"Checkbox",size:"24",color:"green"})]),"unchecked-icon":i(()=>[l(f,{icon:"CloseSharp",size:"18",color:"darkred"})]),_:1},8,["value"])]),_:1})]),_:1}),l(c,{label:"用户UID",path:"user_id"},{default:i(()=>[l(m,{value:o(s).user_id,"onUpdate:value":r[9]||(r[9]=n=>o(s).user_id=n),clearable:"",placeholder:"请输入数字UID，AZ,CZ,EZ,Reel，莫妮卡、普斯特等请填写用户名","show-word-limit":""},null,8,["value"])]),_:1}),l(c,{label:"Passkey",path:"passkey"},{default:i(()=>[l(m,{value:o(s).passkey,"onUpdate:value":r[10]||(r[10]=n=>o(s).passkey=n),clearable:"",placeholder:"Passkey","show-word-limit":""},null,8,["value"])]),_:1}),l(c,{label:"Cookies",path:"cookie"},{default:i(()=>[l(m,{value:o(s).cookie,"onUpdate:value":r[11]||(r[11]=n=>o(s).cookie=n),autosize:{minRows:2,maxRows:6},autocomplete:"off",placeholder:"请输入站点Cookies，与UA搭配使用效果更佳",type:"textarea"},null,8,["value"])]),_:1}),l(c,{label:"UserAgent",path:"user_agent",required:""},{default:i(()=>[l(m,{value:o(s).user_agent,"onUpdate:value":r[12]||(r[12]=n=>o(s).user_agent=n),autosize:{minRows:2,maxRows:6},autocomplete:"off",type:"textarea"},null,8,["value"])]),_:1}),l(c,{label:"删种规则",path:"remove_torrent_rules",required:""},{default:i(()=>[l(m,{value:o(s).remove_torrent_rules,"onUpdate:value":r[13]||(r[13]=n=>o(s).remove_torrent_rules=n),autosize:{minRows:2,maxRows:6},autocomplete:"off",placeholder:"JSON格式，请参照教程填写",type:"textarea"},null,8,["value"])]),_:1}),l(c,{label:"RSS",path:"rss",required:""},{default:i(()=>[l(m,{value:o(s).rss,"onUpdate:value":r[14]||(r[14]=n=>o(s).rss=n),placeholder:"请输入站点RSS订阅地址",autocomplete:"off"},null,8,["value"])]),_:1}),l(c,{label:"Free种",path:"torrents",required:""},{default:i(()=>[l(m,{value:o(s).torrents,"onUpdate:value":r[15]||(r[15]=n=>o(s).torrents=n),placeholder:"请输入站点免费种刷流地址",autocomplete:"off"},null,8,["value"])]),_:1}),l(c,{label:"下载器",path:"downloader",required:""},{default:i(()=>[l(L,{value:o(s).downloader_id,"onUpdate:value":r[16]||(r[16]=n=>o(s).downloader_id=n),placeholder:"请选择刷流使用的下载器",options:o(S).map(n=>({label:n.name,value:n.id})),filterable:""},null,8,["value","options"])]),_:1}),l(c,{label:"代理服务器",path:"custom_server",required:""},{default:i(()=>[l(m,{value:o(s).custom_server,"onUpdate:value":r[17]||(r[17]=n=>o(s).custom_server=n),placeholder:"请输入代理服务器地址，部分站点需要",autocomplete:"off"},null,8,["value"])]),_:1})]),_:1},8,["model","rules"]),l(se),l(U,{justify:"center"},{default:i(()=>[o(s).id!==0?(Y(),ye(P,{key:0,onPositiveClick:r[18]||(r[18]=n=>o(V)(o(s).id))},{trigger:i(()=>[l(p,{type:"error"},{default:i(()=>[v(" 删 除 ")]),_:1})]),default:i(()=>[v(" 确定删除此站点信息吗？ ")]),_:1})):ge("",!0),l(p,{type:"primary",loading:o(x),onClick:T},{default:i(()=>[v(" 保存 ")]),_:1},8,["loading"])]),_:1})])}}});const Lt=Ye(xt,[["__scopeId","data-v-fa1ed255"]]),$t=Xe("website",()=>{const{dialog:g}=et(),k=d(""),C=d(!1),s=d(!1),W=d(!1),z=d("详情"),E=d(1),V=d(8),q=d([{title:"id",key:"id",minWidth:35},{title:"名称",key:"name",minWidth:65,render(e){return _(I,{tag:"a",href:e.url,target:"_blank",secondary:!0,type:"primary",size:"small"},{default:()=>`${e.name} - ${e.nickname}`})}},{title:"标签",key:"tags",minWidth:85,render(e){return e.tags.split(",").map(a=>_(wt,{style:{marginRight:"6px"},type:"info",bordered:!1},{default:()=>a}))}},{title:"支持功能",key:"ability",render(e){const t=[{name:"签到",key:"sign_in",support:e.sign_in},{name:"数据",key:"get_info",support:e.get_info},{name:"Free刷流",key:"brush_free",support:e.brush_free},{name:"RSS刷流",key:"brush_rss",support:e.brush_rss},{name:"辅种",key:"repeat_torrents",support:e.repeat_torrents},{name:"搜索",key:"search_torrents",support:e.search_torrents},{name:"H&R",key:"hr_discern",support:e.hr_discern}];return _(le,()=>t.map(a=>a.support?_(O,{size:"small",round:!1,value:a.support,"onUpdate:value":async()=>{}},{checked:()=>a.name,unchecked:()=>a.name,"checked-icon":()=>"✅","unchecked-icon":()=>_(f,{icon:"CloseSharp",color:"red",size:16})}):null))}}]),S={id:0,sort_id:1,site:void 0,nickname:"",passkey:"",get_info:!0,sign_in:!0,brush_rss:!1,brush_free:!1,package_file:!1,repeat_torrents:!1,hr_discern:!1,search_torrents:!1,user_id:"",joined:"2023-01-01 12:00:00",user_agent:window.navigator.userAgent,cookie:"",rss:"",torrents:"",downloader_id:void 0,custom_server:"",remove_torrent_rules:'{"push":{"size":{"min":1,"max":100},"published":1800,"seeders":3,"sale_expire":3600},"remove":{"upload_speed_avg":{"time":600,"upload_speed":2048},"progress_check":{"0.05":2048,"0.5":2048,"0.8":2048,"0.9":2048},"ratio_check":{"600":0.1,"1800":0.5},"num_completer":{"completers":5,"upspeed":2048},"timeout":3600,"max_ratio":3}}'},Z=d({site:[{required:!0,message:"请选择要添加的站点",trigger:"blur",validator:(e,t)=>t>0}],nickname:[{required:!0,message:"自定义站点名称，必填",trigger:["blur","input"],min:1}],user_id:[{required:!0,message:"请输入数字UID，指定站点请输入用户名",trigger:["blur","input"],min:1}],cookie:[{required:!0,message:"请输入站点Cookies，与UA搭配使用效果更佳",trigger:["blur","input"],min:32}],user_agent:[{required:!0,message:"请输入浏览器UA，使用效果更佳",trigger:["blur","input"]}]}),x=d(!1),T=d(),b=d([]),r=d([]),L=d([]),c=d([]),m=d({...S}),y=d([{label:"请选择站点",value:0}]),U=d([]),R=d(),p=d({bonus_hour:0,seed_days:0,site:0,id:0,my_bonus:0,my_score:0,uploaded:0,downloaded:0,ratio:1,seed_volume:0,leech:0,seed:0,publish:0,invitation:0,my_level:"",my_hr:"",mail:0}),P=d(!1),n=d(),oe=d(0),j=d([]),ie=d([]),D=d(),M=d([]),$=d([]),ne=d(),B=d(),re=d(),G=d([]),K=d([]),Le=d(-7),$e=d([{label:"7天",value:-7},{label:"半月",value:-15},{label:"30天",value:-30},{label:"半年",value:-184},{label:"一年",value:-366},{label:"全部",value:0}]),Ce=async()=>{var t;M.value.length=0,$.value.length=0,B.value={};let e=0;D.value=await at(),(t=D.value)==null||t.data.forEach(a=>{a.uploaded>0&&M.value.push({name:a.name,value:a.uploaded}),a.downloaded>0&&($.value.push({name:a.name,value:a.downloaded}),e+=a.downloaded)}),e<=0&&$.value.push({name:"今日无下载",value:0}),M.value.sort((a,u)=>a.value-u.value),$.value.sort((a,u)=>a.value-u.value),B.value={title:{text:`⬆${h(D.value.total_upload)} ⬇${h(D.value.total_download)}`,top:15,left:"center",textStyle:{fontSize:18,color:"orangered"}},bottom:0,toolbox:{feature:{saveAsImage:{},restore:{}}},tooltip:{show:!1,formatter(a){return`${a.name}：	${h(a.data.value)}`},valueFormatter(a){return h(a)}},legend:{show:!1},series:[{name:"下载量",type:"pie",radius:["25%","45%"],itemStyle:{borderRadius:5,borderColor:"#fff",borderWidth:1},label:{show:!1,position:"center",formatter(a){if(a.data.value>0)return`${a.name} ⬇${h(a.data.value)}`},itemHeight:16,itemWidth:20,fontSize:14},emphasis:{label:{show:!0,fontSize:24,fontWeight:"bold"}},labelLine:{show:!1},data:$},{name:"上传量",type:"pie",radius:["50%","70%"],itemStyle:{borderRadius:5,borderColor:"#fff",borderWidth:1},label:{position:"center",formatter(a){if(a.data.value>0)return`${a.name} ⬆${h(a.data.value)}`},itemHeight:16,itemWidth:20,fontSize:14,show:!1},emphasis:{label:{show:!0,fontSize:24,fontWeight:"bold"}},labelLine:{show:!1},data:M.value}]}},We=async e=>{var t,a;n.value=await ke({days:e}),j.value.length=0,ie.value.length=0,(t=n.value)==null||t.diff.forEach(u=>{j.value.push({name:u.name,type:"bar",emphasis:{focus:"series"},stack:"uploaded",data:u.diff_uploaded_list}),ie.value.push({name:u.name,type:"bar",emphasis:{focus:"series"},stack:"downloaded",data:u.diff_downloaded_list})}),ne.value={title:{text:"每日上传",textStyle:{color:"orangered"},left:"center",top:"12"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter(u){let F="",H=0;u.sort((w,X)=>X.value-w.value),u.forEach(w=>{const X=w.value===0?"":`<div style="display: block;height:14px;width: 48%;float:left;padding: 1%;font-size: 10px;">
                <span style="float:left;"><i style="width: 8px;height: 8px;display: inline-block;background: ${w.color};border-radius: 8px;"></i>${w.seriesName}: </span>
                <span style="float:right;">${h(w.value)}</span>
              </div>`;F+=X,H+=w.value});let Q=`<div style="display: block;height:14px;text-align: left;padding: 1%;font-size: 12px;">
                              <span style="float: left;">
                                    <i style="width: 8px;height: 8px;display: inline-block;background: darkorange;border-radius: 8px;">
                                    </i>总计：${h(H)}</span>
                              <text style="float: right;">${u[0].axisValue}</text>
                            </div>
                            <hr>`;return Q+=F,`<div style="width: 280px;">${Q}</div>`},position(u){return window.innerWidth-u[0]<768&&(u[0]=12),[12,8]},order:"valueDesc",confine:!1,extraCssText:"box-shadow: 0 0 3px rgba(0, 0, 0, 0.3);"},legend:{show:!1},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{feature:{saveAsImage:{},dataZoom:{}}},xAxis:{type:"category",boundaryGap:!0,axisLine:{onZero:!1},data:(a=n.value)==null?void 0:a.date_list},yAxis:{type:"value",axisLabel:{formatter(u){return h(u)}}},series:j.value}},ze=async()=>{b.value=await be()},J=async()=>{c.value.sort((e,t)=>t.status.mail===e.status.mail?t.my_site.sort_id===e.my_site.sort_id?t.my_site.id-e.my_site.id:t.my_site.sort_id-e.my_site.sort_id:t.status.mail-e.status.mail),k.value===""?L.value=c.value:L.value=c.value.filter(e=>{const{site:t,my_site:a}=e;return t.url.toLowerCase().includes(k.value.toLowerCase())||t.name.toLowerCase().includes(k.value.toLowerCase())||t.nickname.toLowerCase().includes(k.value.toLowerCase())||a.nickname.toLowerCase().includes(k.value.toLowerCase())||a.user_id.toLowerCase().includes(k.value.toLowerCase())})},de=async()=>{s.value=!0,c.value.length=0,c.value=await we(),await J(),s.value=!1},Ue=async()=>{c.value.length=0,K.value.length=0,G.value.length=0,c.value=await we(),p.value={bonus_hour:0,seed_days:0,site:0,id:0,my_bonus:0,my_score:0,uploaded:0,downloaded:0,ratio:1,seed_volume:0,leech:0,seed:0,publish:0,invitation:0,my_level:"",my_hr:"",mail:0},c.value.forEach(e=>{const t=e.status;p.value.bonus_hour+=t.bonus_hour,p.value.seed_days+=t.seed_days,p.value.my_bonus+=t.my_bonus,p.value.my_score+=t.my_score,p.value.uploaded+=t.uploaded,p.value.downloaded+=t.downloaded,p.value.seed_volume+=t.seed_volume,p.value.leech+=t.leech,p.value.seed+=t.seed,p.value.publish+=t.publish,p.value.invitation+=t.invitation,p.value.mail+=t.mail;const a=e.my_site;G.value.push({name:a.nickname,value:t.uploaded}),K.value.push({name:a.nickname,value:t.downloaded})}),p.value.ratio=p.value.downloaded>0?p.value.uploaded/p.value.downloaded:0,re.value={title:{text:`⬆${h(p.value.uploaded)} ⬇${h(p.value.downloaded)}`,top:5,left:"center",textStyle:{fontSize:18,color:"orangered"}},bottom:0,toolbox:{feature:{saveAsImage:{},restore:{}}},tooltip:{show:!1,formatter(e){return`${e.name}：	${h(e.data.value)}`},valueFormatter(e){return h(e)}},legend:{show:!1},series:[{name:"下载量",type:"pie",radius:["25%","45%"],itemStyle:{borderRadius:5,borderColor:"#fff",borderWidth:1},label:{show:!1,position:"center",formatter(e){if(e.data.value>0)return`${e.name} ⬇${h(e.data.value)}`},itemHeight:16,itemWidth:20,fontSize:14},emphasis:{label:{show:!0,fontSize:24,fontWeight:"bold"}},labelLine:{show:!1},data:K.value},{name:"上传量",type:"pie",radius:["50%","70%"],itemStyle:{borderRadius:5,borderColor:"#fff",borderWidth:1},label:{position:"center",formatter(e){if(e.data.value>0)return`${e.name} ⬆${h(e.data.value)}`},itemHeight:16,itemWidth:20,fontSize:14,show:!1},emphasis:{label:{show:!0,fontSize:24,fontWeight:"bold"}},labelLine:{show:!1},data:G.value}]}},A=async e=>{const t=c.value.findIndex(u=>u.my_site.id===e),a=await lt(e);c.value.splice(t,1,a),await J()},N=async()=>{r.value=await st(),r.value.sort((e,t)=>t.sort_id-e.sort_id)},Re=async e=>{await Se(e.id,e.sort_id)&&await A(e.id)},De=async(e,t)=>{await Se(e.id,t)&&await N()},ue=async e=>{const t=e===0?await ot():await be();y.value.length=0,t.forEach(a=>{y.value.push({label:String(a.name),value:a.id})}),m.value=e===0?{...S}:await te({mysite_id:e}),g==null||g.info({title:e===0?"添加站点":`编辑站点：${m.value.nickname}`,content:()=>_(Lt),closable:!0})},Me=async()=>{var t;await((t=T.value)==null?void 0:t.validate()),(m.value.id===0?await it(m.value):await ae(m.value))&&(g==null||g.destroyAll(),await A(m.value.id),m.value={...S})},Ae=async e=>{await nt(e)&&await A(e)},Fe=async()=>{await rt()},ce=e=>c.value.find(t=>t.my_site.id===e),He=e=>{const t=c.value.findIndex(a=>a.my_site.id===e);c.value.splice(t,1)},qe=async e=>{await dt({site_id:e})&&(He(e),g==null||g.destroyAll())},Te=async e=>{const t=await ut({site_id:e,page:1,limit:5});U.value=t.items;const a=ce(e);z.value=`${a==null?void 0:a.my_site.nickname}  签到信息`,W.value=!0,C.value=!0},Ne=async e=>{await ct(e)&&await A(e)},Oe=async()=>{s.value=!0,await pt(),s.value=!1},Ie=async(e,t=-7)=>{const a=await ke({site_id:e,days:t}),u=ce(e);z.value=`${u==null?void 0:u.my_site.nickname}  历史数据`,R.value=await ft(a),oe.value=e,W.value=!1,C.value=!0},Ee=()=>{R.value.length=0},Ve=async()=>{await de(),x.value=!1},pe=d([]),fe=ee(()=>pe.value.reduce((e,{columnKey:t,order:a})=>(e[t]=a,e),{})),Ze=e=>{pe.value=[].concat(e)},Pe=ee(()=>[{title:"id",key:"id",minWidth:50,width:55,align:"center",fixed:"left",sorter:"default",sortOrder:fe.value.id||!1},{title:"名称",key:"nickname",minWidth:65,width:125,fixed:"left",sorter:"default",render(e){const t=b.value.find(a=>a.id===e.site);return _(I,{tag:"a",href:t==null?void 0:t.url,target:"_blank",secondary:!0,type:"primary",size:"small"},{default:()=>`${e.nickname}`})}},{title:"排序",key:"sort_id",minWidth:95,width:110,sorter:"default",align:"center",sortOrder:fe.value.sort_id||"descend",render(e){return _(St,{status:"warning",bordered:!1,"button-placement":"both",class:"text-#3b5769",size:"small",min:1,max:200,step:5,value:e.sort_id,"update-value-on-input":!1,"onUpdate:value":async t=>await De(e,t)},{"minus-icon":()=>_(f,{icon:"ArrowDownCircleOutline"}),"add-icon":()=>_(f,{icon:"ArrowUpCircleOutline"})})}},{title:"支持功能",key:"ability",minWidth:255,width:315,align:"center",render(e){const t=[{name:"签到",key:"sign_in",support:e.sign_in},{name:"数据",key:"get_info",support:e.get_info},{name:"辅种",key:"repeat_torrents",support:e.repeat_torrents},{name:"搜索",key:"search_torrents",support:e.search_torrents},{name:"H&R",key:"hr_discern",support:e.hr_discern},{name:"Free刷流",key:"brush_free",support:e.brush_free},{name:"RSS刷流",key:"brush_rss",support:e.brush_rss},{name:"拆包刷流",key:"package_file",support:e.package_file}],a=b.value.find(u=>u.id===e.site);return _(le,()=>t.map(u=>a[u.key]?_(O,{size:"small",round:!1,value:u.support,"rail-style":xe,"onUpdate:value":async F=>{const H=await te({mysite_id:e.id});H[u.key]=F,await ae(H)&&await N()}},{checked:()=>u.name,unchecked:()=>u.name,"checked-icon":()=>"✅","unchecked-icon":()=>_(f,{icon:"CloseSharp",color:"red",size:16})}):null))}},{title:"拆包刷流",key:"package_file",minWidth:95,width:95,render(e){return _(O,{size:"small",round:!1,value:e.package_file,"rail-style":xe,"onUpdate:value":async t=>{const a=await te({mysite_id:e.id});a.package_file=t,await ae(a)&&await N()}},{checked:()=>"拆包",unchecked:()=>"不拆包","checked-icon":()=>"✅","unchecked-icon":()=>_(f,{icon:"CloseSharp",color:"red",size:16})})}},{key:"actions",title:"操作",minWidth:85,width:85,render(e){return _(I,{size:"small",type:"warning",onClick:async()=>await ue(e.id)},{default:()=>"编辑"})},align:"center"}]),me=d({total:0,items:[],per_page:1}),he=d([]),je=async(e,t)=>{me.value=await mt({page:e,limit:t})},Be=async()=>{he.value=await ht()},ve=["未推送","已推送","免费过期","下载器已删种","站点已删种","已存档"],Ge=ee(()=>[{title:"名称",key:"title",minWidth:200,width:225,fixed:"left",sorter:"default",ellipsis:{tooltip:!0}},{title:"副标题",key:"subtitle",minWidth:200,width:225,align:"center",sorter:"default",ellipsis:{tooltip:!0}},{title:"分类",key:"category",minWidth:65,width:125,align:"center",sorter:"default"},{title:"站点",key:"site",minWidth:65,width:125,fixed:"left",align:"center",sorter:"default",render(e){return b.value.find(a=>a.id===e.site).name}},{title:"状态",key:"state",minWidth:65,width:125,align:"center",sorter:"default",filter(e,t){return t.state===e},filterOptions:ve.map((e,t)=>({label:e,value:t})),render(e){return ve[e.state]}},{title:"资源地区",key:"area",minWidth:65,width:125,align:"center",sorter:"default"},{title:"种子大小",key:"size",minWidth:65,width:125,align:"center",sorter:"default",render(e){return h(e.size)}},{title:"H&R",key:"hr",minWidth:65,width:125,align:"center",sorter:"default"},{title:"促销状态",key:"sale_status",minWidth:65,width:125,align:"center",sorter:"default"},{title:"促销时间",key:"sale_expire",minWidth:200,width:225,align:"center",sorter:"default"},{title:"发布时间",key:"published",minWidth:200,width:225,align:"center",sorter:"default"},{title:"做种数",key:"seeders",minWidth:65,width:125,align:"center",sorter:"default"},{title:"下载数",key:"leechers",minWidth:65,width:125,align:"center",sorter:"default"},{title:"完成数",key:"completers",minWidth:65,width:125,align:"center",sorter:"default"},{title:"种子HASH",key:"hash_string",minWidth:65,width:125,align:"center",sorter:"default",ellipsis:{tooltip:!0}},{title:"文件列表HASH",key:"filelist",minWidth:65,width:125,align:"center",sorter:"default",ellipsis:{tooltip:!0}},{title:"豆瓣链接",key:"douban_url",minWidth:65,width:125,align:"center",sorter:"default"},{title:"发行年份",key:"year_publish",minWidth:65,width:125,align:"center",sorter:"default"},{title:"种子文件数",key:"files_count",minWidth:65,width:125,align:"center",sorter:"default"},{title:"已下载",key:"completed",minWidth:65,width:125,align:"center",sorter:"default",render(e){if(e.completed>0)return h(e.completed)}},{title:"已上传",key:"uploaded",minWidth:65,width:125,align:"center",sorter:"default",render(e){if(e.uploaded>0)return h(e.uploaded)}},{title:"下载器",key:"downloader",minWidth:65,width:125,align:"center",sorter:(e,t)=>e.downloader&&t.downloader?e.downloader-t.downloader:(e.downloader||t.downloader)&&e.downloader?1:-1,render(e){if(e.downloader){const t=he.value.find(a=>a.id===e.downloader);return t==null?void 0:t.name}}}]);return{addMySiteFormRules:Z,barOption:ne,getTorrentList:je,getDownloaderList:Be,torrentColumns:Ge,torrentList:me,closeEditForm:Ve,columns:q,currentSite:oe,dataLength:Le,days:$e,drawerTitle:z,eDrawer:C,editMysite:ue,getMySiteList:N,getPerDayData:We,getSignList:Te,getSiteList:ze,getTodayDataList:Ce,getTotalData:Ue,initData:de,initSomeData:Ee,mySite:S,mySiteColumns:Pe,handleUpdateSorter:Ze,mySiteForm:m,mySiteList:r,page:E,pageSize:V,perDayData:n,pieOption:B,pieTotalOption:re,refMySiteForm:T,refreshAllSite:Oe,refreshSite:Ne,removeMySite:qe,saveMySite:Me,searchKey:k,showAddMySite:x,showList:L,signAllSite:Fe,signInList:U,signSite:Ae,sign_today:W,siteEChart:Ie,siteHistory:R,siteInfoFlag:P,siteInfoList:y,siteList:b,siteSearch:J,siteStatusList:c,sortMySite:Re,spinShow:s,todayDataList:D,todayDownloadedDataList:$,todayUploadedDataList:M,totalData:p,updateMySiteStatus:A}});export{$t as u};
