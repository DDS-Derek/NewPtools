import{f as P,b as U}from"./index-78dd3789.js";import{u as D}from"./website-5321976e.js";import{d as R,_ as T,r as l,f as B,G as M,H as F,S as u,R as d,M as o,L as I,c as N,F as Q}from"./vue-080993b5.js";import{R as V,O as $,I as j,a7 as E}from"./naiveUI-1e53cf3e.js";import"./lodash-5fc50ca6.js";import"./ionicons5-b765452e.js";import"./download-ad5ff158.js";import"./getList-041abf44.js";import"./baseStyle-3d03bd09.js";const G=R({__name:"index",setup(H){const{isMobile:r,isPad:J,isDesktop:K}=P(),_=D(),{torrentList:p,torrentColumns:v}=T(_),{getTorrentList:w,getSiteList:f,handleUpdateSorter:h,getDownloaderList:C}=_,s=l(!1),g=l([]),t=l(""),a=l({page:1,pageSize:r.value?20:33,size:"small",showQuickJumper:!0,itemCount:0,showSizePicker:!0,pageSizes:[10,20,25,30,33,40,100],pageSlot:9,simple:r.value,prefix({itemCount:e}){return`共 ${e}.`}}),m=async()=>{g.value=p.value.items.filter(e=>e.title.toLowerCase().includes(t.value.toLowerCase())||e.subtitle.toLowerCase().includes(t.value.toLowerCase())||e.category.toLowerCase().includes(t.value.toLowerCase())||e.area.toLowerCase().includes(t.value.toLowerCase())||e.sale_status.toLowerCase().includes(t.value.toLowerCase()))},n=async(e,i)=>{s.value=!0,await w(e,i),a.value.page=p.value.per_page,a.value.itemCount=p.value.total,await m(),s.value=!1},S=async e=>{a.value.pageSize=e,await n(a.value.page,a.value.pageSize)},L=async e=>{await n(e,a.value.pageSize)},y=async()=>{await n(a.value.page,a.value.pageSize)};return B(async()=>{s.value=!0,await f(),await C(),await n(a.value.page,a.value.pageSize),s.value=!1}),(e,i)=>{const z=V,x=$,b=j,k=E;return M(),F(Q,null,[u(b,{class:"pt-2 mb-1",justify:"start"},{default:d(()=>[u(z,{value:o(t),"onUpdate:value":[i[0]||(i[0]=c=>I(t)?t.value=c:null),m],size:"small"},null,8,["value"]),u(x,{size:"small",type:"warning",onClick:y},{default:d(()=>[N(" 刷新 ")]),_:1})]),_:1}),u(k,{columns:o(v),data:o(g),loading:o(s),"min-height":o(r)?520:740,"paginate-single-page":!0,pagination:o(a),"row-key":c=>c.hash_string,bordered:"","flex-height":"","max-height":"900",remote:"",size:"small",striped:"","onUpdate:pageSize":S,"onUpdate:page":L,"onUpdate:sorter":o(h)},null,8,["columns","data","loading","min-height","pagination","row-key","onUpdate:sorter"])],64)}}});const te=U(G,[["__scopeId","data-v-a877a8e3"]]);export{te as default};
